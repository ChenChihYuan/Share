(this.webpackJsonpbuilders=this.webpackJsonpbuilders||[]).push([[0],{102:function(e,t,n){},133:function(e,t,n){},140:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=140},151:function(e,t,n){},155:function(e,t,n){"use strict";n.r(t);var r=n(2),i=n.n(r),a=n(36),c=n.n(a),o=(n(133),n(102),n(118)),l=n(20),s=n(117),u=n(205),d=n(79),f=n(4),h=n.n(f),p=n(6),j=n(11),b=n(21),x=n(116),m=n(196),v=n(13),O=n(0),y=n(1),g=n(107),w=n.n(g);function I(e,t){return t.IFC.loader.ifcManager.getIfcType(0,e.expressID)}function C(e,t){switch(I(e,t)){case"IFCBEAM":return"Beam";case"IFCBUILDING":return"Building";case"IFCBUILDINGSTOREY":return"Storey";case"IFCBUILDINGELEMENTPROXY":return"Element (generic proxy)";case"IFCCOLUMN":return"Column";case"IFCCOVERING":return"Covering";case"IFCDOOR":return"Door";case"IFCFLOWSEGMENT":return"Flow Segment";case"IFCFLOWTERMINAL":return"Flow Terminal";case"IFCPROJECT":return"Project";case"IFCRAILING":return"Railing";case"IFCROOF":return"Roof";case"IFCSITE":return"Site";case"IFCSLAB":return"Slab";case"IFCSPACE":return"Space";case"IFCWALL":return"Wall";case"IFCWALLSTANDARDCASE":return"Wall (std. case)";case"IFCWINDOW":return"Window";default:return e.type}}function S(e,t){if(e.LongName){if(e.LongName.value)return e.LongName.value.trim()}else if(e.Name&&e.Name.value)return e.Name.value.trim();return C(e,t)+""}var E=function(){function e(t,n){Object(O.a)(this,e),this.ifcElement=t,this.viewer=n,this.eltsByType={},this.eltsByName={},this.eltsByGlobalId={},this.eltsByText={}}return Object(y.a)(e,[{key:"indexElement",value:function(e){var t=I(e,this.viewer);t&&(this.indexElementByString(this.eltsByType,t,e),t.startsWith("IFC")&&this.indexElementByString(this.eltsByType,t.substring(3),e));var n=function(e){return e.Name?e.Name.value.trim():null}(e);n&&(this.indexElementByString(this.eltsByName,n,e),this.indexElementByStringSet(this.eltsByName,this.tokenize(n),e));var r=S(e,this.viewer);r&&(this.indexElementByString(this.eltsByName,r,e),this.indexElementByStringSet(this.eltsByName,this.tokenize(r),e)),e.GlobalId&&e.GlobalId.value&&this.indexElementByString(this.eltsByGlobalId,e.GlobalId.value,e);var i=function(e,t){if(e[t]&&e[t].value)return e[t].value}(e,"Description");i&&this.indexElementByStringSet(this.eltsByGlobalId,this.tokenize(i),e);var a,c=Object(v.a)(e.children);try{for(c.s();!(a=c.n()).done;){var o=a.value;this.indexElement(o)}}catch(l){c.e(l)}finally{c.f()}}},{key:"tokenize",value:function(e){return new Set(e.match(/(\w+)/g))}},{key:"findCreateIndexSet",value:function(e,t){var n=e[t];return void 0===n&&(n=e[t]=new Set),n}},{key:"indexElementByString",value:function(e,t,n){this.findCreateIndexSet(e,t).add(n),this.findCreateIndexSet(e,t.toLowerCase()).add(n)}},{key:"indexElementByStringSet",value:function(e,t,n){var r,i=Object(v.a)(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.indexElementByString(e,a,n)}}catch(c){i.e(c)}finally{i.f()}}},{key:"clearIndex",value:function(){for(var e in this.eltsByType)delete this.eltsByType[e];for(var t in this.eltsByName)delete this.eltsByName[t]}},{key:"search",value:function(e){var t=new Set,n=function(e){if(e){var n,r=Object(v.a)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;t.add(i)}}catch(a){r.e(a)}finally{r.f()}}};if(e.startsWith(":")&&!e.startsWith("::")&&(e="::**[".concat(e.substring(1),"]")),e.startsWith("::")){e=e.substring(2);var r=w()(e).evaluate(this.ifcElement);0,r&&(Array.isArray(r)||(r=[r]),n(new Set(r)))}else{var i=e;0,n(this.eltsByName[i]),n(this.eltsByType[i]);var a=i.toLowerCase();n(this.eltsByName[a]),n(this.eltsByType[a]),n(this.eltsByGlobalId[i]),n(this.eltsByText[i])}var c=Array.from(t).filter((function(e){return null!==e&&void 0!==e&&"number"===typeof e.expressID&&!isNaN(e.expressID)})).map((function(e){return e.expressID}));return c}}]),e}(),B=n(211),k=n(108),N=n.n(k),D=n(109),F=n.n(D),L=n(5),T=Object(m.a)((function(e){return{menuButton:{border:"2px solid lime","@media (max-width: 1280px)":{border:"2px solid lime"}},menuButtonDisabled:{"@media (max-width: 1280px)":{}}}})),R=function(e){var t=e.onClick,n=e.disabled,r=e.open,i=T();return Object(L.jsx)(B.a,{edge:"start",className:n?i.menuButtonDisabled:i.menuButton,color:"secondary","aria-label":"menu",onClick:t,disabled:n,children:r?Object(L.jsx)(N.a,{style:{width:30,height:30}}):Object(L.jsx)(F.a,{style:{width:30,height:30}})})},G=n(159),M=n(210),P=function(e){if(null!=e)return e.value;throw new Error("Ref undefined or null: ",e)},W=function(e,t,n){return"".concat(e,"\xb0 ").concat(t,"' ").concat(n,"''")},A=function(e,t,n){return null!==t?Object(L.jsxs)("tr",{children:[Object(L.jsx)("td",{children:e}),Object(L.jsx)("td",{children:t})]},n):Object(L.jsx)("tr",{children:Object(L.jsx)("td",{colSpan:"2",children:e})},n)},_=function(e){return null!=e.type&&null!=e.value},z=function(e){return"".concat(e.value)},U=function e(t){var n=t.name,r=t.obj,i=0;if(void 0===r||null===r)return null;var a="object"===typeof r;return Object(L.jsx)(M.a,{nodeId:""+i,label:"".concat(a?n:r),children:a?_(r)?z(r):Object.keys(r).map((function(t){return Object(L.jsx)(e,{name:t,obj:r[t]},i++)})):null})},H=function(e){var t=e.viewer,n=e.element,r=n,i=0;return Object(L.jsx)("table",{children:Object(L.jsx)("tbody",{children:Object.keys(r).map((function(e){return function(e,t,n,r,i){var a=r[n];if(null===a||void 0===a)return A(n,"<empty>",i);var c=e.IFC.loader.ifcManager.properties;switch(n){case"GlobalId":return A(n,P(a),i);case"type":return A("Type",C(t,e),i);case"Name":case"PredefinedType":if(null!=a.value)return A(n,a.value,i);break;case"OwnerHistory":return A(Object(L.jsx)(U,{name:"OwnerHistory",obj:c.getItemProperties(0,parseInt(a.value),!0)}),null,i);case"ObjectPlacement":return A(Object(L.jsx)(U,{name:"ObjectPlacement",obj:c.getItemProperties(0,parseInt(a.value),!0)}),null,i);case"RefLatitude":return A("Latitude",W(P(a[0]),P(a[1]),P(a[2])),i);case"RefLongitude":return A("Longitude",W(P(a[0]),P(a[1]),P(a[2])),i);case"Elevation":case"RefElevation":return A("Elevation",P(a),i);default:return A(n,JSON.stringify(a,"  "),i)}}(t,n,e,r,i++)}))})})},J=Object(m.a)((function(e){return{contextualMenu:{width:240,height:300,border:"none",marginLeft:"24px",display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center",top:152,right:20,"@media (max-width: 900px)":{height:"50%",top:140,left:62}},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"50px",width:"160px"}}})),V=function(e){var t=e.viewer,n=e.element,r=J();return Object(L.jsx)("div",{className:r.contextualMenu,style:{height:"auto",position:"absolute"},children:Object(L.jsx)(G.a,{elevation:3,className:r.paper,style:{position:"absolute",width:"auto",height:"auto",top:"0px",right:"0px",minHeight:"20%"},children:Object(L.jsx)(H,{viewer:t,element:n})})})},Y=n(215),q=n(111),X=n.n(q),$=n(112),K=n.n($),Q=n(7),Z=(n(151),n(110)),ee=n(10),te=n(214),ne=function e(t){var n=t.viewer,r=t.element,a=t.onElementSelect,c=t.keyPrefix,o=void 0===c?"":c,l=i.a.forwardRef((function(e,t){var n,i=e.classes,c=e.className,o=e.label,l=e.nodeId,s=e.icon,u=e.expansionIcon,d=e.displayIcon,f=Object(Z.a)(l),h=f.disabled,p=f.expanded,j=f.selected,b=f.focused,x=f.handleExpansion,m=f.handleSelection,v=f.preventSelection,O=s||u||d;return Object(L.jsxs)("div",{className:Object(ee.a)(c,i.root,(n={},Object(Q.a)(n,i.expanded,p),Object(Q.a)(n,i.selected,j),Object(Q.a)(n,i.focused,b),Object(Q.a)(n,i.disabled,h),n)),onMouseDown:function(e){v(e)},ref:t,children:[Object(L.jsx)("div",{onClick:function(e){x(e)},className:i.iconContainer,children:O}),Object(L.jsx)(te.a,{onClick:function(e){m(e),a(r)},component:"div",className:i.label,children:o})]})})),s=function(e){return Object(L.jsx)(M.a,Object(b.a)({ContentComponent:l},e))},u=0;return Object(L.jsx)(s,{nodeId:r.expressID.toString(),label:S(r,n),onClick:function(){return a(r)},children:r.children&&r.children.length>0?r.children.map((function(t){var r="".concat(o,"-").concat(u++);return Object(L.jsx)(i.a.Fragment,{children:Object(L.jsx)(e,{viewer:n,element:t,onElementSelect:a,keyPrefix:r})},r)})):null})},re=Object(m.a)((function(e){return{contextualMenu:{width:308,border:"none",justifyContent:"space-around",alignItems:"center",overflow:"scroll",height:"70%","@media (max-width: 900px)":{height:"70%"}},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",width:"220px",backgroundColor:"lightGray"}}})),ie=function(e){var t=e.viewer,n=e.element,r=e.selectedElements,i=e.expandedElements,a=e.onElementSelect,c=re();return Object(L.jsx)(G.a,{className:c.contextualMenu,style:{position:"absolute",top:144,left:20,overflow:"auto"},children:Object(L.jsx)(Y.a,{"aria-label":"IFC Navigator",defaultCollapseIcon:Object(L.jsx)(X.a,{}),defaultExpandIcon:Object(L.jsx)(K.a,{}),sx:{flexGrow:1,maxWidth:400,overflowY:"auto"},defaultExpanded:i,selected:r,children:Object(L.jsx)(ne,{viewer:t,element:n,onElementSelect:a,keyPrefix:"root"})},"tree")})},ae=n(216),ce=n(206),oe=n(207),le=n(113),se=n.n(le),ue=n(114),de=n.n(ue),fe=Object(m.a)((function(e){return{root:{padding:"2px 4px",display:"flex",alignItems:"center",width:300},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:10},divider:{height:28,margin:4}}}));function he(e){var t=e.onSearch,n=e.onSearchModify,r=e.onClickMenu,a=e.disabled,c=(e.open,fe()),o=i.a.useState(""),l=Object(j.a)(o,2),s=l[0],u=l[1];return Object(L.jsxs)(ae.a,{component:"form",className:c.root,onSubmit:function(e){e.preventDefault(),t(s),document.getElementById("main_search_input").blur()},children:[Object(L.jsx)(oe.a,{className:c.iconButton,"aria-label":"menu",onClick:r,disabled:a,children:Object(L.jsx)(se.a,{})}),Object(L.jsx)(ce.a,{sx:{ml:1,flex:1},id:"main_search_input",placeholder:"Search building",inputProps:{"aria-label":"search"},onChange:function(e){var t=e.target.value;u(t),n(t)},value:s}),Object(L.jsx)(oe.a,{type:"submit",className:c.iconButton,"aria-label":"search",children:Object(L.jsx)(de.a,{})})]})}var pe=n(203),je=n(202),be=n(204),xe=n(115),me=n.n(xe),ve=Object(m.a)((function(e){return{title:{flexGrow:1,color:"WhiteSmoke",fontSize:20,marginRight:"20px"}}})),Oe=function(e){var t=e.fileOpen,n=(e.onClickShare,ve());return Object(L.jsx)(je.a,{elevation:0,position:"static",color:"primary",children:Object(L.jsxs)(pe.a,{variant:"regular",style:{borderBottom:"1px solid \t#585858",backgroundColor:"#787878",display:"flex",justifyContent:"space-between"},children:[Object(L.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},children:[Object(L.jsx)(be.a,{variant:"h6",className:n.title,children:"BLDRS"}),Object(L.jsx)(B.a,{edge:"start",color:"secondary","aria-label":"menu",style:{position:"relative"},onClick:function(){t()},children:Object(L.jsx)(me.a,{style:{width:30,height:30,color:"whiteSmoke"}})})]}),Object(L.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"}})]})})};function ye(){var e=window.dataLayer;e.push(arguments)}window.dataLayer=window.dataLayer||[],ye("js",new Date),ye("config","G-S8TR3R9TWB");var ge=n(209),we=n(208),Ie=i.a.forwardRef((function(e,t){return Object(L.jsx)(we.a,Object(b.a)({elevation:1,ref:t,variant:"filled"},e))})),Ce=function(e){var t=e.message,n=e.type,r=e.open;return Object(L.jsx)(ge.a,{open:r,anchorOrigin:{vertical:"bottom",horizontal:"right"},autoHideDuration:6e3,children:Object(L.jsx)(Ie,{style:{backgroundColor:"#787878",width:"auto",paddingRight:20,textTransform:"uppercase"},severity:n,children:t})})},Se=Object(m.a)((function(e){return{root:Object(b.a)(Object(b.a)({},e.typography.button),{},{backgroundColor:e.palette.background.paper,padding:e.spacing(1),flexGrow:1}),menuToolbarContainer:{width:"100%",display:"flex",justifyContent:"flex-end",marginTop:"10px","@media (max-width: 900px)":{marginTop:"40px"}},elementsButton:{position:"absolute",top:80,right:20,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center","@media (max-width: 900px)":{marginTop:e.spacing(5),top:520,right:15}},title:{flexGrow:1,color:"WhiteSmoke",fontSize:20,marginRight:"20px"},shareContainer:{width:540,height:30,paddingLeft:10,color:"aqua",border:"1px solid aqua",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",position:"absolute",right:80,top:86},searchContainer:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",position:"absolute",left:20,top:84},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"50px",width:"160px"},viewContainer:{position:"absolute",top:"0px",left:"0px",textAlign:"center",color:"blue",width:"100vw",height:"100vh",margin:"auto"},propertyViewContainer:{position:"absolute",top:"100px",right:"50px",width:"400px"}}})),Ee=function(){var e=Se(),t=Object(r.useState)(!1),n=Object(j.a)(t,2),i=n[0],a=n[1],c=Object(r.useState)(!1),o=Object(j.a)(c,2),l=o[0],s=o[1],u=Object(r.useState)(!1),d=Object(j.a)(u,2),f=d[0],b=d[1],m=Object(r.useState)(!1),v=Object(j.a)(m,2),O=v[0],y=v[1],g=Object(r.useState)({}),w=Object(j.a)(g,2),I=w[0],C=w[1],S=Object(r.useState)({}),B=Object(j.a)(S,2),k=B[0],N=B[1],D=Object(r.useState)({}),F=Object(j.a)(D,2),T=F[0],G=F[1],M=Object(r.useState)([]),P=Object(j.a)(M,2),W=P[0],A=P[1],_=Object(r.useState)([]),z=Object(j.a)(_,2),U=z[0],H=z[1],J=Object(r.useState)(!1),Y=Object(j.a)(J,2),q=Y[0],X=Y[1],$=Object(r.useState)(),K=Object(j.a)($,2),Q=K[0],Z=K[1],ee=Object(r.useState)({clearIndex:function(){}}),te=Object(j.a)(ee,2),ne=te[0],re=te[1],ae=function(){var e=Object(p.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return X(!0),Z("Selection in progress"),A(t.map((function(e){return e+""}))),e.prev=3,X(!0),e.next=8,I.pickIfcItemsByID(0,t);case 8:X(!1),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(n=t.expressID)){e.next=3;break}throw new Error("Selected element is missing Express ID");case 3:return ae([n]),e.next=6,I.getProperties(0,t.expressID);case 6:r=e.sent,G(r),b(!0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(e,t){N(e);for(var n=[e.expressID+""],r=e,i=0;i<3;i++)r.children.length>0&&(n.push(r.expressID+""),r=r.children[0]);H(n),s(!0),ne.clearIndex();var c=new E(e,t);c.indexElement(e),re(c),a(!0)};Object(r.useEffect)((function(){var e=document.getElementById("viewer-container"),t=new x.a({container:e});if(C(t),t.addAxes(),t.addGrid(),window.onmousemove=t.prepickIfcItem,window.ondblclick=t.addClippingPlane,window.onkeydown=function(e){return t.removeClippingPlane()},window.location.hash.length>0){var n="./"+window.location.hash.substring(1);0,t.IFC.loader.load(n,(function(e){t.IFC.addIfcModel(e),e.ifcManager.getSpatialStructure(0,!0).then((function(e){oe(e,t)}))}),(function(e){0}),(function(e){console.error("CadView#useEffect$onError",e)}))}}),[]);var le=function(){var e=Object(p.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return X(!0),Z("model is loading"),e.next=4,I.loadIfc(t,!0);case 4:return e.next=6,I.IFC.getSpatialStructure(0,!0);case 6:n=e.sent,oe(n,I),ye("event","select_content",{content_type:"ifc_model",item_id:t}),X(!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=0===Object.keys(k).length,ue=0===Object.keys(T).length;return Object(L.jsxs)("div",{children:[Object(L.jsx)("div",{style:{zIndex:0},children:Object(L.jsx)("div",{className:e.viewContainer,id:"viewer-container"})}),Object(L.jsx)("div",{id:"property-viewer-container",className:e.propertyViewContainer}),Object(L.jsxs)("div",{index:{zIndex:100},children:[Object(L.jsx)(Oe,{fileOpen:function(){var e=document.getElementById("viewer-container"),t=document.createElement("input");t.setAttribute("type","file"),t.classList.add("file-input"),t.addEventListener("change",(function(e){return le(e.target.files[0])}),!1),e.appendChild(t),t.click()},onClickShare:function(){return y(!O)}}),Object(L.jsx)(Ce,{message:Q,open:q,type:"info"}),i&&Object(L.jsx)("div",{className:e.searchContainer,children:Object(L.jsx)(he,{onSearch:function(e){if(A([]),I.IFC.unpickIfcItems(),""!==(e=e.trim())){var t=ne.search(e);ae(t),ye("event","search",{search_term:e}),X(!1)}},onSearchModify:function(e){},onClickMenu:function(){return s(!l)},disabled:se,open:l})}),Object(L.jsx)("div",{className:e.elementsButton,children:Object(L.jsx)(R,{onClick:function(){return b(!f)},disabled:ue,open:f})}),Object(L.jsxs)("div",{className:e.menuToolbarContainer,children:[Object(L.jsx)("div",{children:l?Object(L.jsx)(ie,{viewer:I,element:k,selectedElements:W,expandedElements:U,onElementSelect:ce}):null}),Object(L.jsx)("div",{children:f?Object(L.jsx)(V,{viewer:I,element:T}):null})]})]})]})},Be=Object(s.a)({palette:{primary:{main:d.a[500],light:d.a[100]},secondary:{main:d.a[700]}}});var ke=function(){return Object(L.jsx)(u.a,{theme:Be,children:Object(L.jsx)(o.a,{children:Object(L.jsx)(l.c,{children:Object(L.jsx)(l.a,{path:"/",children:Object(L.jsx)(Ee,{})})})})})},Ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,218)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),i(e),a(e),c(e)}))};c.a.render(Object(L.jsx)(i.a.StrictMode,{children:Object(L.jsx)(ke,{})}),document.getElementById("root")),Ne()}},[[155,1,2]]]);
//# sourceMappingURL=main.1dcc97ae.chunk.js.map