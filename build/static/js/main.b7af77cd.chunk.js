(this.webpackJsonpbuilders=this.webpackJsonpbuilders||[]).push([[0],{129:function(e,t,n){},136:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=136},147:function(e,t,n){},151:function(e,t,n){"use strict";n.r(t);var i=n(2),r=n.n(i),a=n(33),c=n.n(a),l=(n(129),n(98),n(115)),o=n(16),s=n(114),u=n(198),d=n(76),f=n(3),h=n.n(f),p=n(6),j=n(11),x=n(21),b=n(113),m=n(189),v=n(12),y=n(0),O=n(1),g=n(104),I=n.n(g);function w(e,t){return t.IFC.loader.ifcManager.getIfcType(0,e.expressID)}function C(e,t){switch(w(e,t)){case"IFCBEAM":return"Beam";case"IFCBUILDING":return"Building";case"IFCBUILDINGSTOREY":return"Storey";case"IFCBUILDINGELEMENTPROXY":return"Element (generic proxy)";case"IFCCOLUMN":return"Column";case"IFCCOVERING":return"Covering";case"IFCDOOR":return"Door";case"IFCFLOWSEGMENT":return"Flow Segment";case"IFCFLOWTERMINAL":return"Flow Terminal";case"IFCPROJECT":return"Project";case"IFCRAILING":return"Railing";case"IFCROOF":return"Roof";case"IFCSITE":return"Site";case"IFCSLAB":return"Slab";case"IFCSPACE":return"Space";case"IFCWALL":return"Wall";case"IFCWALLSTANDARDCASE":return"Wall (std. case)";case"IFCWINDOW":return"Window";default:return e.type}}function S(e,t){if(e.LongName){if(e.LongName.value)return e.LongName.value.trim()}else if(e.Name&&e.Name.value)return e.Name.value.trim();return C(e,t)+""}var B=function(){function e(t,n){Object(y.a)(this,e),this.ifcElement=t,this.viewer=n,this.eltsByType={},this.eltsByName={},this.eltsByGlobalId={},this.eltsByText={}}return Object(O.a)(e,[{key:"indexElement",value:function(e){var t=w(e,this.viewer);t&&(this.indexElementByString(this.eltsByType,t,e),t.startsWith("IFC")&&this.indexElementByString(this.eltsByType,t.substring(3),e));var n=function(e){return e.Name?e.Name.value.trim():null}(e);n&&(this.indexElementByString(this.eltsByName,n,e),this.indexElementByStringSet(this.eltsByName,this.tokenize(n),e));var i=S(e,this.viewer);i&&(this.indexElementByString(this.eltsByName,i,e),this.indexElementByStringSet(this.eltsByName,this.tokenize(i),e)),e.GlobalId&&e.GlobalId.value&&this.indexElementByString(this.eltsByGlobalId,e.GlobalId.value,e);var r=function(e,t){if(e[t]&&e[t].value)return e[t].value}(e,"Description");r&&this.indexElementByStringSet(this.eltsByGlobalId,this.tokenize(r),e);var a,c=Object(v.a)(e.children);try{for(c.s();!(a=c.n()).done;){var l=a.value;this.indexElement(l)}}catch(o){c.e(o)}finally{c.f()}}},{key:"tokenize",value:function(e){return new Set(e.match(/(\w+)/g))}},{key:"findCreateIndexSet",value:function(e,t){var n=e[t];return void 0===n&&(n=e[t]=new Set),n}},{key:"indexElementByString",value:function(e,t,n){this.findCreateIndexSet(e,t).add(n),this.findCreateIndexSet(e,t.toLowerCase()).add(n)}},{key:"indexElementByStringSet",value:function(e,t,n){var i,r=Object(v.a)(t);try{for(r.s();!(i=r.n()).done;){var a=i.value;this.indexElementByString(e,a,n)}}catch(c){r.e(c)}finally{r.f()}}},{key:"clearIndex",value:function(){for(var e in this.eltsByType)delete this.eltsByType[e];for(var t in this.eltsByName)delete this.eltsByName[t]}},{key:"search",value:function(e){var t=new Set,n=function(e){if(e){var n,i=Object(v.a)(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;t.add(r)}}catch(a){i.e(a)}finally{i.f()}}};if(e.startsWith(":")&&!e.startsWith("::")&&(e="::**[".concat(e.substring(1),"]")),e.startsWith("::")){e=e.substring(2);var i=I()(e).evaluate(this.ifcElement);0,i&&(Array.isArray(i)||(i=[i]),n(new Set(i)))}else{var r=e;0,n(this.eltsByName[r]),n(this.eltsByType[r]);var a=r.toLowerCase();n(this.eltsByName[a]),n(this.eltsByType[a]),n(this.eltsByGlobalId[r]),n(this.eltsByText[r])}var c=Array.from(t).filter((function(e){return null!==e&&void 0!==e&&"number"===typeof e.expressID&&!isNaN(e.expressID)})).map((function(e){return e.expressID}));return c}}]),e}(),E=n(202),N=n(105),k=n.n(N),D=n(106),F=n.n(D),L=n(5),T=Object(m.a)((function(e){return{menuButton:{border:"2px solid lime","@media (max-width: 1280px)":{border:"2px solid lime"}},menuButtonDisabled:{"@media (max-width: 1280px)":{}}}})),G=function(e){var t=e.onClick,n=e.disabled,i=e.open,r=T();return Object(L.jsx)(E.a,{edge:"start",className:n?r.menuButtonDisabled:r.menuButton,color:"secondary","aria-label":"menu",onClick:t,disabled:n,children:i?Object(L.jsx)(k.a,{style:{width:30,height:30}}):Object(L.jsx)(F.a,{style:{width:30,height:30}})})},R=n(155),M=n(201),P=function(e){if(null!=e)return e.value;throw new Error("Ref undefined or null: ",e)},A=function(e,t,n){return"".concat(e,"\xb0 ").concat(t,"' ").concat(n,"''")},W=function(e,t,n){return null!==t?Object(L.jsxs)("tr",{children:[Object(L.jsx)("td",{children:e}),Object(L.jsx)("td",{children:t})]},n):Object(L.jsx)("tr",{children:Object(L.jsx)("td",{colSpan:"2",children:e})},n)},z=function(e){return null!=e.type&&null!=e.value},U=function(e){return"".concat(e.value)},_=function e(t){var n=t.name,i=t.obj,r=0;if(void 0===i||null===i)return null;var a="object"===typeof i;return Object(L.jsx)(M.a,{nodeId:""+r,label:"".concat(a?n:i),children:a?z(i)?U(i):Object.keys(i).map((function(t){return Object(L.jsx)(e,{name:t,obj:i[t]},r++)})):null})},J=function(e){var t=e.viewer,n=e.element,i=n,r=0;return Object(L.jsx)("table",{children:Object(L.jsx)("tbody",{children:Object.keys(i).map((function(e){return function(e,t,n,i,r){var a=i[n];if(null===a||void 0===a)return W(n,"<empty>",r);var c=e.IFC.loader.ifcManager.properties;switch(n){case"GlobalId":return W(n,P(a),r);case"type":return W("Type",C(t,e),r);case"Name":case"PredefinedType":if(null!=a.value)return W(n,a.value,r);break;case"OwnerHistory":return W(Object(L.jsx)(_,{name:"OwnerHistory",obj:c.getItemProperties(0,parseInt(a.value),!0)}),null,r);case"ObjectPlacement":return W(Object(L.jsx)(_,{name:"ObjectPlacement",obj:c.getItemProperties(0,parseInt(a.value),!0)}),null,r);case"RefLatitude":return W("Latitude",A(P(a[0]),P(a[1]),P(a[2])),r);case"RefLongitude":return W("Longitude",A(P(a[0]),P(a[1]),P(a[2])),r);case"Elevation":case"RefElevation":return W("Elevation",P(a),r);default:return W(n,JSON.stringify(a,"  "),r)}}(t,n,e,i,r++)}))})})},H=Object(m.a)((function(e){return{contextualMenu:{width:240,height:300,border:"none",marginLeft:"24px",display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center",top:152,right:20,"@media (max-width: 900px)":{height:"50%",top:140,left:62}},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"50px",width:"160px"}}})),V=function(e){var t=e.viewer,n=e.element,i=H();return Object(L.jsx)("div",{className:i.contextualMenu,style:{height:"auto",position:"absolute"},children:Object(L.jsx)(R.a,{elevation:3,className:i.paper,style:{position:"absolute",width:"auto",height:"auto",top:"0px",right:"0px",minHeight:"20%"},children:Object(L.jsx)(J,{viewer:t,element:n})})})},Y=n(206),q=n(108),X=n.n(q),K=n(109),Q=n.n(K),Z=n(7),$=(n(147),n(107)),ee=n(9),te=n(205),ne=function e(t){var n=t.viewer,i=t.element,a=t.onElementSelect,c=t.keyPrefix,l=void 0===c?"":c,o=r.a.forwardRef((function(e,t){var n,r=e.classes,c=e.className,l=e.label,o=e.nodeId,s=e.icon,u=e.expansionIcon,d=e.displayIcon,f=Object($.a)(o),h=f.disabled,p=f.expanded,j=f.selected,x=f.focused,b=f.handleExpansion,m=f.handleSelection,v=f.preventSelection,y=s||u||d;return Object(L.jsxs)("div",{className:Object(ee.a)(c,r.root,(n={},Object(Z.a)(n,r.expanded,p),Object(Z.a)(n,r.selected,j),Object(Z.a)(n,r.focused,x),Object(Z.a)(n,r.disabled,h),n)),onMouseDown:function(e){v(e)},ref:t,children:[Object(L.jsx)("div",{onClick:function(e){b(e)},className:r.iconContainer,children:y}),Object(L.jsx)(te.a,{onClick:function(e){m(e),a(i)},component:"div",className:r.label,children:l})]})})),s=function(e){return Object(L.jsx)(M.a,Object(x.a)({ContentComponent:o},e))},u=0;return Object(L.jsx)(s,{nodeId:i.expressID.toString(),label:S(i,n),onClick:function(){return a(i)},children:i.children&&i.children.length>0?i.children.map((function(t){var i="".concat(l,"-").concat(u++);return Object(L.jsx)(r.a.Fragment,{children:Object(L.jsx)(e,{viewer:n,element:t,onElementSelect:a,keyPrefix:i})},i)})):null})},ie=Object(m.a)((function(e){return{contextualMenu:{width:308,border:"none",justifyContent:"space-around",alignItems:"center",overflow:"scroll",height:"70%","@media (max-width: 900px)":{height:"70%"}},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",width:"220px",backgroundColor:"lightGray"}}})),re=function(e){var t=e.viewer,n=e.element,i=e.selectedElements,r=e.expandedElements,a=e.onElementSelect,c=ie();return Object(L.jsx)(R.a,{className:c.contextualMenu,style:{position:"absolute",top:144,left:20,overflow:"auto"},children:Object(L.jsx)(Y.a,{"aria-label":"IFC Navigator",defaultCollapseIcon:Object(L.jsx)(X.a,{}),defaultExpandIcon:Object(L.jsx)(Q.a,{}),sx:{flexGrow:1,maxWidth:400,overflowY:"auto"},defaultExpanded:r,selected:i,children:Object(L.jsx)(ne,{viewer:t,element:n,onElementSelect:a,keyPrefix:"root"})},"tree")})},ae=n(207),ce=n(199),le=n(200),oe=n(110),se=n.n(oe),ue=n(111),de=n.n(ue),fe=Object(m.a)((function(e){return{root:{padding:"2px 4px",display:"flex",alignItems:"center",width:300},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:10},divider:{height:28,margin:4}}}));function he(e){var t=e.onSearch,n=e.onSearchModify,i=e.onClickMenu,a=e.disabled,c=(e.open,fe()),l=r.a.useState(""),o=Object(j.a)(l,2),s=o[0],u=o[1];return Object(L.jsxs)(ae.a,{component:"form",className:c.root,onSubmit:function(e){e.preventDefault(),t(s),document.getElementById("main_search_input").blur()},children:[Object(L.jsx)(le.a,{className:c.iconButton,"aria-label":"menu",onClick:i,disabled:a,children:Object(L.jsx)(se.a,{})}),Object(L.jsx)(ce.a,{sx:{ml:1,flex:1},id:"main_search_input",placeholder:"Search building",inputProps:{"aria-label":"search"},onChange:function(e){var t=e.target.value;u(t),n(t)},value:s}),Object(L.jsx)(le.a,{type:"submit",className:c.iconButton,"aria-label":"search",children:Object(L.jsx)(de.a,{})})]})}var pe=n(196),je=n(195),xe=n(197),be=n(112),me=n.n(be),ve=Object(m.a)((function(e){return{title:{flexGrow:1,color:"WhiteSmoke",fontSize:20,marginRight:"20px"}}})),ye=function(e){var t=e.fileOpen,n=(e.onClickShare,ve());return Object(L.jsx)(je.a,{elevation:0,position:"static",color:"primary",children:Object(L.jsxs)(pe.a,{variant:"regular",style:{borderBottom:"1px solid \t#585858",backgroundColor:"#787878",display:"flex",justifyContent:"space-between"},children:[Object(L.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},children:[Object(L.jsx)(xe.a,{variant:"h6",className:n.title,children:"BUILDRS"}),Object(L.jsx)(E.a,{edge:"start",color:"secondary","aria-label":"menu",style:{position:"relative"},onClick:t,children:Object(L.jsx)(me.a,{style:{width:30,height:30,color:"whiteSmoke"}})})]}),Object(L.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"}})]})})},Oe=Object(m.a)((function(e){return{root:Object(x.a)(Object(x.a)({},e.typography.button),{},{backgroundColor:e.palette.background.paper,padding:e.spacing(1),flexGrow:1}),menuToolbarContainer:{width:"100%",display:"flex",justifyContent:"flex-end",marginTop:"10px","@media (max-width: 900px)":{marginTop:"40px"}},elementsButton:{position:"absolute",top:80,right:20,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center","@media (max-width: 900px)":{marginTop:e.spacing(5),top:520,right:15}},title:{flexGrow:1,color:"WhiteSmoke",fontSize:20,marginRight:"20px"},shareContainer:{width:540,height:30,paddingLeft:10,color:"aqua",border:"1px solid aqua",display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",position:"absolute",right:80,top:86},searchContainer:{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",position:"absolute",left:20,top:84},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column",height:"50px",width:"160px"},viewContainer:{position:"absolute",top:"0px",left:"0px",textAlign:"center",color:"blue",width:"100vw",height:"100vh",margin:"auto"},propertyViewContainer:{position:"absolute",top:"100px",right:"50px",width:"400px"}}})),ge=function(){var e=Oe(),t=Object(i.useState)(!1),n=Object(j.a)(t,2),r=n[0],a=n[1],c=Object(i.useState)(!1),l=Object(j.a)(c,2),o=l[0],s=l[1],u=Object(i.useState)(!1),d=Object(j.a)(u,2),f=d[0],x=d[1],m=Object(i.useState)(!1),v=Object(j.a)(m,2),y=v[0],O=v[1],g=Object(i.useState)({}),I=Object(j.a)(g,2),w=I[0],C=I[1],S=Object(i.useState)({}),E=Object(j.a)(S,2),N=E[0],k=E[1],D=Object(i.useState)({}),F=Object(j.a)(D,2),T=F[0],R=F[1],M=Object(i.useState)([]),P=Object(j.a)(M,2),A=P[0],W=P[1],z=Object(i.useState)([]),U=Object(j.a)(z,2),_=U[0],J=U[1],H=Object(i.useState)({clearIndex:function(){}}),Y=Object(j.a)(H,2),q=Y[0],X=Y[1],K=function(e){W(e.map((function(e){return e+""})));try{0,w.pickIfcItemsByID(0,e)}catch(t){0}},Q=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(n=t.expressID)){e.next=3;break}throw new Error("Selected element is missing Express ID");case 3:return K([n]),e.next=6,w.getProperties(0,t.expressID);case 6:i=e.sent,R(i),x(!0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(i.useEffect)((function(){var e=document.getElementById("viewer-container"),t=new b.a({container:e});C(t),t.addAxes(),t.addGrid(),window.onmousemove=t.prepickIfcItem,window.ondblclick=t.addClippingPlane,window.onkeydown=function(e){return t.removeClippingPlane()}}),[]);var Z=0===Object.keys(N).length,$=0===Object.keys(T).length;return Object(L.jsxs)("div",{children:[Object(L.jsx)("div",{style:{zIndex:0},children:Object(L.jsx)("div",{className:e.viewContainer,id:"viewer-container"})}),Object(L.jsx)("div",{id:"property-viewer-container",className:e.propertyViewContainer}),Object(L.jsxs)("div",{index:{zIndex:100},children:[Object(L.jsx)(ye,{fileOpen:function(){var e=function(){var e=Object(p.a)(h.a.mark((function e(t){var n,i,r,c,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,w.loadIfc(t.target.files[0],!0);case 3:return e.next=5,w.IFC.getSpatialStructure(0,!0);case 5:for(n=e.sent,k(n),i=[n.expressID+""],r=n,c=0;c<3;c++)r.children.length>0&&(i.push(r.expressID+""),r=r.children[0]);J(i),s(!0),q.clearIndex(),(l=new B(n,w)).indexElement(n),X(l),a(!0);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t=document.getElementById("viewer-container"),n=document.createElement("input");n.setAttribute("type","file"),n.classList.add("file-input"),n.addEventListener("change",(function(t){return e(t)}),!1),t.appendChild(n),n.click()},onClickShare:function(){return O(!y)}}),r&&Object(L.jsx)("div",{className:e.searchContainer,children:Object(L.jsx)(he,{onSearch:function(e){if(W([]),w.IFC.unpickIfcItems(),""!==(e=e.trim())){var t=q.search(e);K(t)}},onSearchModify:function(e){},onClickMenu:function(){return s(!o)},disabled:Z,open:o})}),Object(L.jsx)("div",{className:e.elementsButton,children:Object(L.jsx)(G,{onClick:function(){return x(!f)},disabled:$,open:f})}),Object(L.jsxs)("div",{className:e.menuToolbarContainer,children:[Object(L.jsx)("div",{children:o?Object(L.jsx)(re,{viewer:w,element:N,selectedElements:A,expandedElements:_,onElementSelect:Q}):null}),Object(L.jsx)("div",{children:f?Object(L.jsx)(V,{viewer:w,element:T}):null})]})]})]})},Ie=Object(s.a)({palette:{primary:{main:d.a[500],light:d.a[100]},secondary:{main:d.a[700]}}});var we=function(){return Object(L.jsx)(u.a,{theme:Ie,children:Object(L.jsx)(l.a,{children:Object(L.jsx)(o.c,{children:Object(L.jsx)(o.a,{path:"/",children:Object(L.jsx)(ge,{})})})})})},Ce=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,208)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),i(e),r(e),a(e),c(e)}))};c.a.render(Object(L.jsx)(r.a.StrictMode,{children:Object(L.jsx)(we,{})}),document.getElementById("root")),Ce()},98:function(e,t,n){}},[[151,1,2]]]);
//# sourceMappingURL=main.b7af77cd.chunk.js.map